<!DOCTYPE html>
<html>
  <head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
  <meta name="description" content="">
  <meta name="keyword" content="hexo-theme">
  
    <link rel="shortcut icon" href="/css/images/logo.png">
  
  <title>
    
      Azure Stream Analytics Notes(2021/10/13 updated) | Daily Growing
    
  </title>
  <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.css" rel="stylesheet">
  <link href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
  
<link rel="stylesheet" href="/css/style.css">

  
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/geopattern/1.2.3/js/geopattern.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>
  
  
  
  
    <!-- MathJax support START -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <!-- MathJax support END -->
  


  
  
    
<script src="/js/local-search.js"></script>


<meta name="generator" content="Hexo 7.0.0"></head>
<div class="wechat-share">
  <img src="/css/images/logo.png" />
</div>
  <body>
    <header class="header fixed-header">
  <div class="header-container">
    <a class="home-link" href="/">
      <div class="logo"></div>
      <span>Daily Growing</span>
    </a>
    <ul class="right-list">
      
        <li class="list-item">
          
            <a href="/" class="item-link">Home</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/series/" class="item-link">Series</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/tags/" class="item-link">Tags</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/archives/" class="item-link">Archives</a>
          
        </li>
      
        <li class="list-item">
          
            <a href="/about/" class="item-link">About</a>
          
        </li>
      
      
        <li class="menu-item menu-item-search right-list">
    <a role="button" class="popup-trigger">
        <i class="fa fa-search fa-fw"></i>
    </a>
</li>
      
    </ul>
    <div class="menu">
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </div>
    <div class="menu-mask">
      <ul class="menu-list">
        
          <li class="menu-item">
            
              <a href="/" class="menu-link">Home</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/series/" class="menu-link">Series</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/tags/" class="menu-link">Tags</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/archives/" class="menu-link">Archives</a>
            
          </li>
        
          <li class="menu-item">
            
              <a href="/about/" class="menu-link">About</a>
            
          </li>
        
      </ul>
    </div>
    
      <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
            <span class="search-icon">
                <i class="fa fa-search"></i>
            </span>
            <div class="search-input-container">
                <input autocomplete="off" autocapitalize="off"
                    placeholder="Please enter your keyword(s) to search." spellcheck="false"
                    type="search" class="search-input">
            </div>
            <span class="popup-btn-close">
                <i class="fa fa-times-circle"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>
    
  </div>
</header>

    <div id="article-banner">
  <h2>Azure Stream Analytics Notes(2021/10/13 updated)</h2>
  <p class="post-date">2021-10-09</p>
  <div class="arrow-down">
    <a href="javascript:;"></a>
  </div>
</div>
<main class="app-body flex-box">
  <!-- Article START -->
  <article class="post-article">
    <section class="markdown-content"><p>Azure Stream Analytics is a real-time analytics and complex event-processing engine that is designed to analyze and process high volumes of fast streaming data from multiple sources simultaneously.</p>
<span id="more"></span>
<h1 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h1><p>The following scenarios are examples of when you can use Azure Stream Analytics:</p>
<ul>
<li>Analyze real-time telemetry streams from IoT devices</li>
<li>Web logs&#x2F;clickstream analytics</li>
<li>Geospatial analytics for fleet management and driverless vehicles</li>
<li>Remote monitoring and predictive maintenance of high value assets</li>
<li>Real-time analytics on Point of Sale data for inventory control and anomaly detection</li>
</ul>
<p><img src="/images/ASA/MicrosoftTeams-image.png"></p>
<h2 id="How-does-Stream-Analytics-work"><a href="#How-does-Stream-Analytics-work" class="headerlink" title="How does Stream Analytics work?"></a>How does Stream Analytics work?</h2><p>An Azure Stream Analytics job consists of an input, query, and an output. Stream Analytics ingests data from Azure Event Hubs (including Azure Event Hubs from Apache Kafka), Azure IoT Hub, or Azure Blob Storage. The query, which is based on SQL query language, can be used to easily filter, sort, aggregate, and join streaming data over a period of time.</p>
<p>The following image shows how data is sent to Stream Analytics, analyzed, and sent for other actions like storage or presentation:<br><img src="/images/ASA/stream-analytics-e2e-pipeline.png" alt="stream-analytics-e2e-pipeline"></p>
<h2 id="Overview-of-Azure-Stream-Analytics-Cluster"><a href="#Overview-of-Azure-Stream-Analytics-Cluster" class="headerlink" title="Overview of Azure Stream Analytics Cluster"></a>Overview of Azure Stream Analytics Cluster</h2><p>Stream Analytics clusters are powered by the same engine that powers Stream Analytics jobs running in a multi-tenant environment. The single tenant, dedicated cluster have the following features:</p>
<ul>
<li>Single tenant hosting with no noise from other tenants. Your resources are truly “isolated” and performs better when there are burst in traffic.</li>
<li>Scale your cluster between 36 to 216 SUs as your streaming usage increases over time.</li>
<li>VNet support that allows your Stream Analytics jobs to connect to other resources securely using private endpoints.</li>
<li>Ability to author C# user-defined functions and custom deserializers in any region.</li>
<li>Zero maintenance cost allowing you to focus your effort on building real-time analytics solutions.</li>
</ul>
<h1 id="Quickstart"><a href="#Quickstart" class="headerlink" title="Quickstart"></a>Quickstart</h1><h2 id="Create-a-Stream-Analytics-job"><a href="#Create-a-Stream-Analytics-job" class="headerlink" title="Create a Stream Analytics job"></a>Create a Stream Analytics job</h2><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-quick-create-portal">by using the Azure portal</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/quick-create-azure-cli">by using the Azure CLI</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/quick-create-azure-resource-manager">by using an ARM template</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-quick-create-powershell">by using Azure PowerShell</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-quick-create-vs">by using Visual Studio</a><br><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/quick-create-visual-studio-code">by Visual Studio Code</a></p>
<h2 id="Create-a-dedicated-Azure-Stream-Analytics-cluster"><a href="#Create-a-dedicated-Azure-Stream-Analytics-cluster" class="headerlink" title="Create a dedicated Azure Stream Analytics cluster"></a>Create a dedicated Azure Stream Analytics cluster</h2><p><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/create-cluster">using Azure portal</a></p>
<h1 id="Tutorial"><a href="#Tutorial" class="headerlink" title="Tutorial"></a>Tutorial</h1><h2 id="Analyze-fraudulent-call-data-with-Stream-Analytics-and-visualize-results-in-Power-BI-dashboard"><a href="#Analyze-fraudulent-call-data-with-Stream-Analytics-and-visualize-results-in-Power-BI-dashboard" class="headerlink" title="Analyze fraudulent call data with Stream Analytics and visualize results in Power BI dashboard"></a><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-real-time-fraud-detection">Analyze fraudulent call data with Stream Analytics and visualize results in Power BI dashboard</a></h2><ul>
<li>Create an Azure Event Hub</li>
<li>Start the event generator application(sends data to the event hub)</li>
<li>Create a Stream Analytics job</li>
<li>Configure job input&#x2F;output</li>
<li>Create queries to transform real-time data</li>
<li>Start the job and visualize output</li>
</ul>
<h2 id="Run-Azure-Functions-from-Azure-Stream-Analytics-jobs"><a href="#Run-Azure-Functions-from-Azure-Stream-Analytics-jobs" class="headerlink" title="Run Azure Functions from Azure Stream Analytics jobs"></a><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-with-azure-functions">Run Azure Functions from Azure Stream Analytics jobs</a></h2><p>Stream Analytics invokes Functions through HTTP triggers. The Functions output adapter allows users to connect Functions to Stream Analytics, such that the events can be triggered based on Stream Analytics queries.</p>
<h2 id="Write-a-C-user-defined-function-for-Azure-Stream-Analytics-job-Preview"><a href="#Write-a-C-user-defined-function-for-Azure-Stream-Analytics-job-Preview" class="headerlink" title="Write a C# user-defined function for Azure Stream Analytics job (Preview)"></a><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/stream-analytics-edge-csharp-udf">Write a C# user-defined function for Azure Stream Analytics job (Preview)</a></h2><p>C# user-defined functions (UDFs) created in Visual Studio allow you to extend the Azure Stream Analytics query language with your own functions. You can reuse existing code (including DLLs) and use mathematical or complex logic with C#. There are three ways to implement UDFs: CodeBehind files in a Stream Analytics project, UDFs from a local C# project, or UDFs from an existing package from a storage account.</p>
<h2 id="Custom-NET-deserializers-for-Azure-Stream-Analytics"><a href="#Custom-NET-deserializers-for-Azure-Stream-Analytics" class="headerlink" title="Custom .NET deserializers for Azure Stream Analytics"></a><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/stream-analytics/custom-deserializer">Custom .NET deserializers for Azure Stream Analytics</a></h2><h2 id="Deploy-Azure-Stream-Analytics-as-an-IoT-Edge-module"><a href="#Deploy-Azure-Stream-Analytics-as-an-IoT-Edge-module" class="headerlink" title="Deploy Azure Stream Analytics as an IoT Edge module"></a><a target="_blank" rel="noopener" href="https://docs.microsoft.com/en-us/azure/iot-edge/tutorial-deploy-stream-analytics">Deploy Azure Stream Analytics as an IoT Edge module</a></h2><p>Many IoT solutions use analytics services to gain insight about data as it arrives in the cloud from IoT devices. With Azure IoT Edge, you can take Azure Stream Analytics logic and move it onto the device itself. By processing telemetry streams at the edge, you can reduce the amount of uploaded data and reduce the time it takes to react to actionable insights.</p>
<p>Azure IoT Edge and Azure Stream Analytics are integrated to simplify your workload development. You can create an Azure Stream Analytics job in the Azure portal and then deploy it as an IoT Edge module with no additional code.</p>
</section>
    <!-- Tags START -->
    
      <div class="tags">
        <span>Tags:</span>
        
  <a href="/tags#Azure" >
    <span class="tag-code">Azure</span>
  </a>

      </div>
    
    <!-- Tags END -->
    <!-- NAV START -->
    
  <div class="nav-container">
    <!-- reverse left and right to put prev and next in a more logic postition -->
    
      <a class="nav-left" href="/2021/08/11/sfDeveloperIPrep/">
        <span class="nav-arrow">← </span>
        
          Prepare for Salesforce Developer I Credential (update 2021/08/21)
        
      </a>
    
    
      <a class="nav-right" href="/2021/10/21/AzureDataExplorer/">
        
          Azure Data Factory Notes(2021/10/21 updated)
        
        <span class="nav-arrow"> →</span>
      </a>
    
  </div>

    <!-- NAV END -->
    <!-- 打赏 START -->
    
    <!-- 打赏 END -->
    <!-- 二维码 START -->
    
    <!-- 二维码 END -->
    
      <!-- Utterances START -->
      <div id="utterances"></div>
      <script src="https://utteranc.es/client.js"
        repo=""
        issue-term="pathname"
        theme="github-light"
        crossorigin="anonymous"
        async></script>    
      <!-- Utterances END -->
    
  </article>
  <!-- Article END -->
  <!-- Catalog START -->
  
    <aside class="catalog-container">
  <div class="toc-main">
    <strong class="toc-title">Catalog</strong>
    
      <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Overview"><span class="toc-nav-text">Overview</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#How-does-Stream-Analytics-work"><span class="toc-nav-text">How does Stream Analytics work?</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Overview-of-Azure-Stream-Analytics-Cluster"><span class="toc-nav-text">Overview of Azure Stream Analytics Cluster</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Quickstart"><span class="toc-nav-text">Quickstart</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Create-a-Stream-Analytics-job"><span class="toc-nav-text">Create a Stream Analytics job</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Create-a-dedicated-Azure-Stream-Analytics-cluster"><span class="toc-nav-text">Create a dedicated Azure Stream Analytics cluster</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#Tutorial"><span class="toc-nav-text">Tutorial</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Analyze-fraudulent-call-data-with-Stream-Analytics-and-visualize-results-in-Power-BI-dashboard"><span class="toc-nav-text">Analyze fraudulent call data with Stream Analytics and visualize results in Power BI dashboard</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Run-Azure-Functions-from-Azure-Stream-Analytics-jobs"><span class="toc-nav-text">Run Azure Functions from Azure Stream Analytics jobs</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Write-a-C-user-defined-function-for-Azure-Stream-Analytics-job-Preview"><span class="toc-nav-text">Write a C# user-defined function for Azure Stream Analytics job (Preview)</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Custom-NET-deserializers-for-Azure-Stream-Analytics"><span class="toc-nav-text">Custom .NET deserializers for Azure Stream Analytics</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#Deploy-Azure-Stream-Analytics-as-an-IoT-Edge-module"><span class="toc-nav-text">Deploy Azure Stream Analytics as an IoT Edge module</span></a></li></ol></li></ol>
    
  </div>
</aside>
  
  <!-- Catalog END -->
</main>

<script>
  (function () {
    var url = 'http://yoursite.com/2021/10/09/azureASA/';
    var banner = ''
    if (banner !== '' && banner !== 'undefined' && banner !== 'null') {
      $('#article-banner').css({
        'background-image': 'url(' + banner + ')'
      })
    } else {
      $('#article-banner').geopattern(url)
    }
    $('.header').removeClass('fixed-header')

    // error image
    $(".markdown-content img").on('error', function() {
      $(this).attr('src', '/css/images/error_icon.png')
      $(this).css({
        'cursor': 'default'
      })
    })

    // zoom image
    $(".markdown-content img").on('click', function() {
      var src = $(this).attr('src')
      if (src !== '/css/images/error_icon.png') {
        var imageW = $(this).width()
        var imageH = $(this).height()

        var zoom = ($(window).width() * 0.95 / imageW).toFixed(2)
        zoom = zoom < 1 ? 1 : zoom
        zoom = zoom > 2 ? 2 : zoom
        var transY = (($(window).height() - imageH) / 2).toFixed(2)

        $('body').append('<div class="image-view-wrap"><div class="image-view-inner"><img src="'+ src +'" /></div></div>')
        $('.image-view-wrap').addClass('wrap-active')
        $('.image-view-wrap img').css({
          'width': `${imageW}`,
          'transform': `translate3d(0, ${transY}px, 0) scale3d(${zoom}, ${zoom}, 1)`
        })
        $('html').css('overflow', 'hidden')

        $('.image-view-wrap').on('click', function() {
          $(this).remove()
          $('html').attr('style', '')
        })
      }
    })
  })();
</script>







    <div class="scroll-top">
  <span class="arrow-icon"></span>
</div>
    <footer class="app-footer">
  <p class="copyright">
    &copy; 2024 | Powered by <a href="https://hexo.io" target="_blank">Hexo</a>
    <br>
    
  </p>
</footer>

<script>
  function async(u, c) {
    var d = document, t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
    s.parentNode.insertBefore(o, s);
  }
</script>
<script>
  async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
    FastClick.attach(document.body);
  })
</script>

<script>
  var hasLine = 'true';
  async("//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js", function(){
    $('figure pre').each(function(i, block) {
      var figure = $(this).parents('figure');
      if (hasLine === 'false') {
        figure.find('.gutter').hide();
      }
      hljs.configure({useBR: true});
      var lang = figure.attr('class').split(' ')[1] || 'code';
      var codeHtml = $(this).html();
      var codeTag = document.createElement('code');
      codeTag.className = lang;
      codeTag.innerHTML = codeHtml;
      $(this).attr('class', '').empty().html(codeTag);
      figure.attr('data-lang', lang.toUpperCase());
      hljs.highlightBlock(block);
    });
  })
</script>
<!-- Baidu Tongji -->


<script src="/js/script.js"></script>


  </body>
</html>